üèóÔ∏è OVERVIEW: Functional Relationships
Domain	Key Entities	Relationships
Cutting Operations	cutting_jobs, workers, job_assignments	Each cutting job can be assigned to one or more workers. Jobs reference inventory materials.
Inventory	inventory_items, stock_movements, deliveries, suppliers	Deliveries increase stock; outgoing stock (e.g., cutting jobs or sales) decreases stock.
Suppliers	suppliers, deliveries	Suppliers provide lumber and other materials.
Workforce	workers, job_assignments	Workers perform cutting jobs.
System Logging (optional)	audit_logs, users	Tracks actions (admin/staff users).
üß© ENTITY-BY-ENTITY BREAKDOWN
1. inventory_items

Stores all materials (lumber, panels, poles, etc.)

Field	Type	Description
inventory_id	INT, PK, AI	Unique inventory item
name	VARCHAR(100)	e.g., Gemelina
type	VARCHAR(50)	Lumber / Panel / Paole
size	VARCHAR(50)	e.g., 2x2x8
quantity	INT	Current stock count
status	ENUM('In Stock','Low Stock','Out of Stock')	Auto-updated via triggers
unit	VARCHAR(20)	pcs / cu.ft etc.
created_at	DATETIME	
updated_at	DATETIME	

üîó Relations:

One-to-Many with stock_movements

One-to-Many with cutting_jobs (the material used)

One-to-Many with deliveries (incoming stock)

2. suppliers

Stores supplier details.

Field	Type	Description
supplier_id	INT, PK, AI	
name	VARCHAR(100)	e.g., Mahayag Timber Corp.
contact_person	VARCHAR(100)	
address	VARCHAR(255)	
email_or_phone	VARCHAR(100)	
created_at	DATETIME	
updated_at	DATETIME	

üîó Relations:

One-to-Many with deliveries

3. deliveries

Logs every supplier delivery and what inventory it affects.

Field	Type	Description
delivery_id	INT, PK, AI	
supplier_id	INT, FK ‚Üí suppliers.supplier_id	
inventory_id	INT, FK ‚Üí inventory_items.inventory_id	Material delivered
quantity	INT	Number of units delivered
unit	VARCHAR(20)	pcs, cu.ft, etc.
delivery_date	DATE	
remarks	TEXT, nullable	
created_at	DATETIME	

üîó Relations:

Delivery updates inventory quantity.

Tied to supplier and specific item.

4. stock_movements

Tracks stock in/out transactions ‚Äî acts as audit trail for inventory.

Field	Type	Description
movement_id	INT, PK, AI	
inventory_id	INT, FK ‚Üí inventory_items.inventory_id	
movement_type	ENUM('IN','OUT')	
quantity	INT	
reference_type	ENUM('delivery','cutting_job','manual_adjustment')	
reference_id	INT	delivery_id / job_id / etc.
remarks	TEXT, nullable	
created_at	DATETIME	

üîó Relations:

Central link between inventory and other domains.

Used for monthly stock movement analytics.

5. workers

Details of workers under the lumber operations.

Field	Type	Description
worker_id	INT, PK, AI	
full_name	VARCHAR(100)	
age	INT	
address	VARCHAR(255)	
contract_no	VARCHAR(50)	
status	ENUM('Active','Inactive')	
created_at	DATETIME	
updated_at	DATETIME	

üîó Relations:

One-to-Many with job_assignments

6. cutting_jobs
Represents a single cutting operation (e.g., ‚ÄúGemelina Planks‚Äù).
Field	Type	Description

job_id	INT, PK, AI	
job_name	VARCHAR(100)	
inventory_id	INT, FK ‚Üí inventory_items.inventory_id	Material to cut
quantity	INT	
size	VARCHAR(50)	
due_date	DATE	
status	ENUM('Pending','In Progress','Completed')	
created_at	DATETIME	
updated_at	DATETIME	

üîó Relations:

One-to-Many with job_assignments

One-to-Many with stock_movements (as OUT)

7. job_assignments

Mapping between workers and cutting jobs.

Field	Type	Description
assignment_id	INT, PK, AI	
job_id	INT, FK ‚Üí cutting_jobs.job_id	
worker_id	INT, FK ‚Üí workers.worker_id	
assigned_by	INT, FK ‚Üí users.user_id	admin who assigned
remarks	TEXT	
assigned_date	DATETIME	
status	ENUM('Assigned','Ongoing','Completed')	
completion_date	DATE, nullable	

üîó Relations:

Many-to-One ‚Üí cutting_jobs

Many-to-One ‚Üí workers

Many-to-One ‚Üí users (admin/staff assigning)

8. users (System Accounts)

For login, admin, and permissions (already exists if you have a global user/session system).

Field	Type	Description
user_id	INT, PK, AI	
username	VARCHAR(50)	
password	VARCHAR(255)	
role	ENUM('Admin','Staff','Worker')	
created_at	DATETIME	
9. audit_logs (Optional, for future expansion)

Tracks user/system actions.

Field	Type	Description
log_id	INT, PK, AI	
user_id	INT, FK ‚Üí users.user_id	
action	VARCHAR(255)	
reference_type	VARCHAR(50)	e.g. "cutting_job"
reference_id	INT	
ip_address	VARCHAR(45)	
created_at	DATETIME	
üß† NORMALIZATION SUMMARY (3NF)
Normal Form	How it‚Äôs satisfied
1NF	All tables have atomic values, no repeating groups (‚úì)
2NF	No partial dependency ‚Äî each non-key depends on full PK (‚úì)
3NF	No transitive dependencies ‚Äî e.g., supplier contact info stays in suppliers, not in deliveries (‚úì)


---- RELATIONSHIP OVERVIEW (ERD Description) ----------------
suppliers (1)‚îÄ‚îÄ‚îÄ(‚àû) deliveries (‚àû)‚îÄ‚îÄ‚îÄ(1) inventory_items
                                      ‚îÇ
                                      ‚îî‚îÄ‚îÄ‚îÄ(‚àû) stock_movements
inventory_items (1)‚îÄ‚îÄ‚îÄ(‚àû) cutting_jobs (1)‚îÄ‚îÄ‚îÄ(‚àû) job_assignments (‚àû)‚îÄ‚îÄ‚îÄ(1) workers
users (1)‚îÄ‚îÄ‚îÄ(‚àû) job_assignments





CREATE TABLE inventory_items (
  inventory_id INT AUTO_INCREMENT PRIMARY KEY,
  name VARCHAR(100),
  type VARCHAR(50),
  size VARCHAR(50),
  quantity INT DEFAULT 0,
  unit VARCHAR(20),
  status ENUM('In Stock','Low Stock','Out of Stock') DEFAULT 'In Stock',
  created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
  updated_at DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
);

CREATE TABLE suppliers (
  supplier_id INT AUTO_INCREMENT PRIMARY KEY,
  name VARCHAR(100),
  contact_person VARCHAR(100),
  address VARCHAR(255),
  email_or_phone VARCHAR(100),
  created_at DATETIME DEFAULT CURRENT_TIMESTAMP
);

CREATE TABLE deliveries (
  delivery_id INT AUTO_INCREMENT PRIMARY KEY,
  supplier_id INT,
  inventory_id INT,
  quantity INT,
  unit VARCHAR(20),
  delivery_date DATE,
  remarks TEXT,
  created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
  FOREIGN KEY (supplier_id) REFERENCES suppliers(supplier_id),
  FOREIGN KEY (inventory_id) REFERENCES inventory_items(inventory_id)
);

CREATE TABLE stock_movements (
  movement_id INT AUTO_INCREMENT PRIMARY KEY,
  inventory_id INT,
  movement_type ENUM('IN','OUT'),
  quantity INT,
  reference_type ENUM('delivery','cutting_job','manual_adjustment'),
  reference_id INT,
  remarks TEXT,
  created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
  FOREIGN KEY (inventory_id) REFERENCES inventory_items(inventory_id)
);

CREATE TABLE workers (
  worker_id INT AUTO_INCREMENT PRIMARY KEY,
  full_name VARCHAR(100),
  age INT,
  address VARCHAR(255),
  contract_no VARCHAR(50),
  status ENUM('Active','Inactive') DEFAULT 'Active',
  created_at DATETIME DEFAULT CURRENT_TIMESTAMP
);

CREATE TABLE cutting_jobs (
  job_id INT AUTO_INCREMENT PRIMARY KEY,
  job_name VARCHAR(100),
  inventory_id INT,
  size VARCHAR(50),
  quantity INT,
  due_date DATE,
  status ENUM('Pending','In Progress','Completed') DEFAULT 'Pending',
  created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
  updated_at DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  FOREIGN KEY (inventory_id) REFERENCES inventory_items(inventory_id)
);

CREATE TABLE job_assignments (
  assignment_id INT AUTO_INCREMENT PRIMARY KEY,
  job_id INT,
  worker_id INT,
  assigned_by INT,
  remarks TEXT,
  assigned_date DATETIME DEFAULT CURRENT_TIMESTAMP,
  status ENUM('Assigned','Ongoing','Completed') DEFAULT 'Assigned',
  completion_date DATE NULL,
  FOREIGN KEY (job_id) REFERENCES cutting_jobs(job_id),
  FOREIGN KEY (worker_id) REFERENCES workers(worker_id)
);
